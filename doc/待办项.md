# 项目待办项

## 一、项目初始化
- [x] 后端：uv init 初始化项目，安装依赖（flask, pyjwt, bcrypt）
- [x] 前端：npm create vue@latest 初始化项目，安装依赖（element-plus, axios, vue-router, xlsx, vuedraggable）
- [x] 配置 Vite 代理（/api → localhost:5000）

## 二、后端开发
### 2.1 基础设施
- [x] config.py：配置文件（SECRET_KEY、数据库路径、Token过期时间）
- [x] database.py：数据库初始化、建表、默认admin账号插入（密码admin123）
- [x] common/response.py：统一响应格式封装
- [x] common/auth.py：login_required、admin_required 装饰器

### 2.2 认证模块（auth/）
- [x] 用户登录接口 POST /api/auth/login
- [x] 用户登出接口 POST /api/auth/logout
- [x] 获取用户信息接口 GET /api/auth/userinfo
- [x] 修改密码接口 POST /api/auth/change-password

### 2.3 用户管理模块（users/）
- [x] 新增用户 POST /api/users
- [x] 查询用户列表 GET /api/users
- [x] 修改用户 PUT /api/users/{id}
- [x] 删除用户 DELETE /api/users/{id}
- [x] 重置密码 POST /api/users/{id}/reset-password

### 2.4 模板管理模块（form_templates/）
- [x] 新增模板 POST /api/templates
- [x] 查询模板列表 GET /api/templates
- [x] 查询模板详情 GET /api/templates/{id}
- [x] 修改模板 PUT /api/templates/{id}
- [x] 删除模板 DELETE /api/templates/{id}

### 2.5 表单数据模块（forms/）
- [x] 新增表单数据 POST /api/forms
- [x] 批量导入数据 POST /api/forms/batch
- [x] 查询表单数据 GET /api/forms（支持高级筛选filters、排序sort_field/sort_order）
- [x] 查询数据详情 GET /api/forms/{id}
- [x] 修改表单数据 PUT /api/forms/{id}
- [x] 删除表单数据 DELETE /api/forms/{id}

### 2.6 系统日志模块（logs/）
- [x] 查询登录日志 GET /api/logs

## 三、前端开发
### 3.1 基础设施
- [x] api/request.js：Axios实例、请求/响应拦截器
- [x] router/index.js：路由配置、导航守卫
- [x] utils/storage.js：Token和记住密码工具函数
- [x] views/Layout.vue：主布局（顶栏+侧栏+内容区）

### 3.2 页面开发
- [x] Login.vue：登录页
- [x] Home.vue：首页（欢迎语）
- [x] Templates.vue：模板管理页（列表+搜索+编辑弹窗+字段配置）
- [x] Forms.vue：表单数据页（模板选择+动态列表+编辑弹窗）
- [x] FormBrowser.vue：数据查询页（高级筛选+列管理+排序+导出Excel）
- [x] FormSheet.vue：表格编辑页（Excel风格编辑）
- [x] Users.vue：用户管理页（列表+新增/编辑弹窗+重置密码）
- [x] Profile.vue：个人中心页（用户信息+修改密码）
- [x] Logs.vue：系统日志页
- [x] Forbidden.vue：401无权限页
- [x] NotFound.vue：404页面

### 3.3 公共组件
- [x] components/DynamicForm.vue：动态表单渲染组件
- [x] components/FieldEditor.vue：模板字段配置编辑器

## 四、测试
### 4.1 E2E 自动化测试（Playwright）
- [x] 搭建 Playwright 测试框架（test_webapp.py）
- [x] 登录页测试（渲染、空字段校验、错误密码、成功登录）
- [x] 导航测试（侧边栏8个菜单项）
- [x] 各页面加载测试（模板、表单、数据查询、表格编辑、用户、日志、个人中心）
- [x] 退出登录和未认证重定向测试
- [x] 全部 15/15 用例通过

### 4.2 压力测试
- [x] 搭建压力测试框架（test_stress.py，20并发/100请求）
- [x] 读操作测试（GET接口全部100%成功，P95 < 120ms）
- [x] 写操作测试（发现SQLite并发写入锁冲突问题）
- [x] 混合读操作测试（200请求0失败）

### 4.3 联调验证
- [x] 前后端接口联调
- [x] 权限控制端到端验证（admin/user角色切换）
- [x] 首次登录强制改密全流程验证
- [x] 分页功能验证

## 五、待优化项
- [ ] SQLite 开启 WAL 模式提升并发写入性能
- [ ] 增加 SQLite 连接 timeout 参数避免 database locked 错误
- [ ] Home 首页增加数据统计（模板数量、表单数据数量）
- [ ] 后端接口测试（pytest）
