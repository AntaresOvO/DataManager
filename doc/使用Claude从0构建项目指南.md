# 使用 Claude 从 0 构建项目：从设计文档到完整实现

> 目标读者：大学生 / 编程入门者
> 本文以本项目（数据管理平台）为真实案例，介绍如何借助 Claude 完成一个完整项目的全流程。

---

## 一、整体流程概览

```
明确想法
   ↓
① 写需求文档   ← 用 Claude 帮你梳理和完善
   ↓
② 写架构设计   ← 用 Claude 帮你做技术选型和结构设计
   ↓
③ 逐模块实现   ← 用 Claude 帮你写代码
   ↓
④ 调试与测试   ← 用 Claude 帮你排查问题
   ↓
⑤ 补充文档     ← 用 Claude 帮你写说明文档
```

---

## 二、第一步：写需求文档

### 为什么先写需求？

很多同学上来就让 Claude 直接写代码，结果写到一半发现方向不对，反复返工。
**先把"要做什么"说清楚，Claude 才能帮你做对。**

### 怎么和 Claude 沟通需求？

把你的想法用自然语言描述出来，让 Claude 帮你整理成结构化文档。

**示例 Prompt：**
```
我想做一个表单管理系统，用于企业内部管理各种表单数据。
功能包括：用户登录、表单模板管理、表单数据的增删改查。
目标用户是企业员工，有管理员和普通用户两种角色。
请帮我整理成一份完整的需求规格说明书，包含功能需求、非功能需求、接口设计。
```

### 需求文档应包含哪些内容？

参考本项目的 [需求说明v0.1.md](需求说明v0.1.md)，一份好的需求文档包括：

| 章节 | 内容 |
|------|------|
| 项目概述 | 背景、目标、核心特性 |
| 功能需求 | 每个功能的详细说明、权限约束 |
| 非功能需求 | 性能、安全、易用性要求 |
| 业务规则 | 数据规则、权限规则等约束 |
| 界面需求 | 路由定义、页面设计 |
| 接口设计 | API 路径、请求/响应格式 |
| 数据字典 | 数据库表结构 |

### 关键技巧

- **迭代完善**：第一版不用完美，先写出来，再让 Claude 帮你补充遗漏的场景
- **明确边界**：告诉 Claude 哪些功能"不做"，避免范围蔓延
- **版本管理**：文档命名加版本号（如 `需求说明v0.1.md`），方便追踪变更

---

## 三、第二步：写架构设计文档

### 为什么需要架构设计？

架构设计决定了代码的整体结构。有了架构文档，Claude 写出来的代码才能风格统一、结构清晰，而不是一堆散乱的文件。

### 示例 Prompt：

```
基于上面的需求文档，请帮我设计系统架构。
技术栈：Python Flask（后端）+ Vue 3（前端）+ SQLite（数据库）。
请包含：目录结构、模块划分、数据库设计（ER图+建表SQL）、认证流程、前后端交互方式。
```

### 架构文档应包含哪些内容？

参考本项目的 [架构设计文档v0.1.md](架构设计文档v0.1.md)：

| 章节 | 内容 |
|------|------|
| 架构模式 | 前后端分离、B/S架构等 |
| 技术选型 | 每个技术的选型理由 |
| 目录结构 | 前后端各自的文件组织方式 |
| 核心模块设计 | 每个模块的职责说明 |
| 数据库设计 | ER图、建表SQL |
| 认证流程 | 登录、鉴权的流程图 |
| 安全设计 | 密码加密、Token、权限控制 |

### 关键技巧

- **让 Claude 解释选型理由**：不只是"用什么"，还要知道"为什么用"，这样你才能真正学到东西
- **先确认架构再写代码**：架构改动成本远高于代码改动，先对齐再动手

---

## 四、第三步：逐模块实现代码

### 正确的开发顺序

```
环境搭建 → 数据库初始化 → 后端基础框架 → 认证模块
→ 业务模块（按依赖顺序）→ 前端框架 → 前端页面
```

### 如何让 Claude 写代码？

**关键原则：给 Claude 足够的上下文。**

每次让 Claude 写一个模块时，把相关的文档和已有代码一起提供：

```
我正在开发一个 Flask + Vue 的表单管理系统。
后端架构：每个模块包含 api.py（路由）、crud.py（数据库操作）、models.py（字段定义）。
数据库表结构：[粘贴建表SQL]
请帮我实现用户认证模块（auth/），包含登录、登出、获取用户信息、修改密码接口。
要求：使用 JWT Token，密码用 bcrypt 加密，统一响应格式为 {"code": 200, "msg": "", "data": {}}
```

### 实际案例：本项目的开发过程

本项目通过以下对话完成了各功能模块：

**1. 环境搭建**
- 提问：项目在新电脑上如何运行？
- Claude 读取了 `pyproject.toml`、`package.json`、`vite.config.js` 后，生成了 [环境搭建指南.md](环境搭建指南.md)

**2. 功能迭代**
- 提问：数据查询的字段筛选允许对单字段的逻辑筛选，比如选择 `=`、`>`、`in` 等
- Claude 先探索了 `server/forms/crud.py`、`server/forms/api.py`、`client/src/views/FormBrowser.vue`，理解现有代码后，再实现了操作符筛选功能

**3. 自动化测试**
- 使用 `webapp-testing` skill，Claude 启动前后端服务，用 Playwright 自动测试页面功能

### 关键技巧

- **一次只做一件事**：不要让 Claude 一次性写完所有代码，按模块拆分
- **让 Claude 先读代码再改**：修改已有代码前，先让 Claude 读取相关文件，避免破坏现有逻辑
- **保存对话记录**：重要的对话可以保存（本项目使用了 `claude-logs/` 目录），方便回溯

---

## 五、第四步：调试与测试

### 遇到 Bug 怎么办？

把错误信息完整地给 Claude，让它帮你分析：

```
运行后端时报错：
ImportError: cannot import name 'login_required' from 'common.auth'

相关代码：[粘贴出错的文件内容]
请帮我找出原因并修复。
```

### 让 Claude 帮你写测试

```
请为 server/forms/crud.py 中的 query_forms 函数写单元测试，
覆盖以下场景：无筛选条件、按字段等值筛选、按字段范围筛选、分页。
```

### 让 Claude 做代码审查

```
请审查以下代码，重点关注：SQL注入风险、权限校验是否完整、异常处理是否合理。
[粘贴代码]
```

---

## 六、第五步：补充项目文档

项目完成后，让 Claude 帮你补充文档：

```
请根据以下代码，生成 API 文档，包含每个接口的路径、方法、请求参数、响应格式。
```

```
请根据项目结构，写一份 README，包含项目介绍、功能列表、快速启动步骤。
```

---

## 七、与 Claude 协作的核心原则

### 1. 上下文越充分，结果越好

Claude 不了解你的项目背景，每次对话都要提供足够的上下文：
- 项目是做什么的
- 相关的代码文件内容
- 期望的输出格式

### 2. 分步骤，不要一步到位

❌ 不好的方式：
```
帮我写一个完整的表单管理系统，包含前后端所有代码
```

✅ 好的方式：
```
帮我实现后端认证模块的登录接口，要求：[具体要求]
```

### 3. 理解代码，不要只是复制

让 Claude 解释它写的代码：
```
请解释这段代码的逻辑，特别是 JWT Token 的生成和验证部分
```

### 4. 迭代优化

第一版代码不用完美，先跑通，再逐步优化：
```
这个查询接口现在支持了基本筛选，请帮我增加对 in 和 not_in 操作符的支持
```

---

## 八、推荐的项目文档结构

参考本项目的 `doc/` 目录：

```
doc/
├── 需求说明v0.1.md        # 功能需求、接口设计、数据字典
├── 架构设计文档v0.1.md    # 技术选型、模块设计、数据库设计
├── 环境搭建指南.md        # 新环境运行步骤
├── 测试文档v0.1.md        # 测试用例和测试结果
├── 待办项.md              # 当前待完成的任务
└── claude-logs/           # 重要对话记录（可选）
```

---

## 九、常见问题

**Q：Claude 写的代码有 Bug 怎么办？**
A：把错误信息和相关代码一起发给 Claude，让它分析原因。不要自己猜，让 Claude 系统地排查。

**Q：Claude 不了解我的项目怎么办？**
A：每次新对话开始时，把需求文档或架构文档的关键部分粘贴给它，建立上下文。

**Q：代码越来越多，Claude 记不住之前的内容怎么办？**
A：把关键的设计决策写进文档，每次对话时引用文档内容，而不是依赖 Claude 的记忆。

**Q：不知道从哪里开始怎么办？**
A：从需求文档开始。先把你想做的事情用中文描述清楚，Claude 会帮你拆解成可执行的步骤。
